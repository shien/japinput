# Phase 5: 候補ウィンドウ UI

## 目標

変換候補をポップアップウィンドウで表示し、マウス・キーボードで選択できるようにする。

## 背景

IME の候補ウィンドウは、テキストカーソル付近にポップアップ表示される。
TSF の `ITfCandidateListUIElement` を使うか、独自の Win32 ウィンドウを作成する。

## タスク

### 5.1 候補ウィンドウの基本実装

- [ ] `src/candidate_window.rs` に候補ウィンドウを実装
- [ ] Win32 API でポップアップウィンドウを作成
- [ ] 候補リストの描画（番号付き）
- [ ] カーソル位置に追従して表示

**動作確認:**
- `cargo build` がエラーなく完了すること
- Windows 環境でIMEを有効にし、変換時にポップアップが表示されることを手動確認

### 5.2 ウィンドウの表示制御

- [ ] 変換開始時にウィンドウを表示
- [ ] 候補選択・確定時にウィンドウを非表示
- [ ] キャンセル時にウィンドウを非表示
- [ ] フォーカス消失時の処理

**動作確認:**
- 変換開始→候補表示、確定→非表示、Escape→非表示の各操作を手動確認
- アプリ切り替え時にウィンドウが残らないことを手動確認

### 5.3 キーボード操作

- [ ] 数字キー (1-9) で直接候補選択
- [ ] Space / ↓: 次の候補
- [ ] ↑: 前の候補
- [ ] Enter: 確定
- [ ] Escape: キャンセル

**動作確認:**
- 各キー操作（数字キー、Space、↑↓、Enter、Escape）が期待通りに動作することを手動確認
- `cargo test` でキー操作→コマンド変換のユニットテストがパスすること

### 5.4 見た目の調整

- [ ] フォント設定（日本語フォント対応）
- [ ] ウィンドウサイズの自動調整
- [ ] DPI スケーリング対応
- [ ] ダークモード / ライトモード対応（任意）

**動作確認:**
- 高 DPI 環境（150%, 200%）でウィンドウサイズとフォントが適切にスケーリングされることを手動確認
- 候補の文字数が多い場合にウィンドウ幅が自動調整されることを手動確認

## 完了条件

- 変換時に候補ウィンドウがカーソル付近に表示される
- キーボードで候補を選択・確定できる
- ウィンドウの表示/非表示が適切に制御される

## ファイル構成 (予定)

```
src/
├── candidate_window.rs  # 候補ウィンドウ UI
├── ...
```
